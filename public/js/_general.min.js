window.stylesLoaded=!1,window.addEventListener("load",function(){window.stylesLoaded=!0});const videoItems=document.querySelectorAll(".card-post-video"),videoItems2=document.querySelectorAll(".card-post-video-2");function registrarComentario(){var t=document.getElementById("btn-opinar"),e=document.getElementById("opinion-text").value,o=$("#idpostop").val();(""==o||null==o)&&t.getAttribute("data-video");var a=t.getAttribute("data-user");$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},url:"/post-commet",type:"POST",data:{id:o,user:a,comment:e},success:function(t){$("#opinion-text").val(""),$("#post-count-"+o).text(t.comment_count)},error:function(t,e,o){console.log("Error al agregar el comentario")}}),mostrarComentario(o)}function mostrarComentario(t){let e=t;$("#opinion").find(".idVideoPo").val(e);var o=$("#authuser").val();$.ajax({url:"/post-view-comment",type:"GET",data:{id:e},success:function(t){var e="";t.forEach(function(t){var a=t.poc_timestamp;e+='<div class="card border-0">',e+='<div class="card-body">',e+='<div class="header-comment-profile">',null==t.u_img_profile?e+='<img class="img-profile-min-list" src="/images/3135768.png" alt="img-profile">':e+='<img class="img-profile-min-list" src="/'+t.u_img_profile+'" alt="img-profile">',e+='<div class="content-comment">',e+='<a class="titulo-h6" href="">'+t.u_nombre_usuario+"</a>",e+='<p class="text-default" style="font-size: 12px;">'+t.poc_comment+"</p>",e+="</div>",o==t.id&&(e+='<div class="dropdown">',e+='<button class="btn btn-list-comment" type="button" data-bs-toggle="dropdown" aria-expanded="false" title="Editar o eliminar comentario">',e+='<i class="bi bi-grip-horizontal"></i>',e+="</button>",e+='<ul class="dropdown-menu shadow border-0">',e+='<li><a class="dropdown-item btn-comment-delete" data-id="'+t.poc_id+'" data-post="'+t.pu_id+'" href="#">Eliminar</a></li>',e+="</ul>"),e+="</div>",e+="</div>",e+="</div>",e+="</div>"}),$(".content-opinion").html(e)},error:function(t,e,o){alert("Error al registrar")}})}function copiarAlPortapapeles(){document.getElementById("input_vinculo_post").select(),document.execCommand("copy")}function obtenerNotificacionesComentarios(){var t=document.getElementById("name-profile-notify");$.ajax({url:"/notificaciones",type:"GET",success:function(e){var o="",a=e.notificaciones;document.getElementById("img-profile-notify"),o+="<div class='mt-2'><h6 class='titulo-h6' style='padding-left: 10px; margin-bottom: 20px'>Notificaciones</h6></div>",a.forEach(function(e){var a=e.poac_timestamp,n=new Date,i=new Date(a),r=Math.floor((n-i)/6e4),s=r/60,l=s/24;o+="<div class='content-notify'>",o+="<a class='d-flex gap-3 align-items-center' data-user='"+e.id+"' data-post='"+e.pu_id+"' style='height: 40px !important;' href='"+t.textContent+"/post/"+e.pu_id+"' >",null==e.u_img_profile?o+="<img style='width:40px; height:40px; object-fit: fill;' src='/images/3135768.png' alt=''>":o+="<img style='width:40px; height:40px; object-fit: fill;' src='"+e.u_img_profile+"' alt=''>","like"==e.poac_action&&"img"==e.pu_type?o+="<p class='text-default mt-1' style='font-size:13px;line-height: 15px'>"+e.u_nombre_usuario+" di\xf3 me gusta a tu imagen</p>":"like"==e.poac_action&&"movie"==e.pu_type?o+="<p class='text-default mt-1' style='font-size:13px;line-height: 15px'>"+e.u_nombre_usuario+" di\xf3 me gusta a tu video</p>":"like"==e.poac_action&&"hilo"==e.pu_type?o+="<p class='text-default mt-1' style='font-size:13px;line-height: 15px'>"+e.u_nombre_usuario+" di\xf3 me gusta a tu hilo</p>":"comment"==e.poac_action&&(o+="<p class='text-default mt-1' style='font-size:13px;line-height: 15px'>"+e.u_nombre_usuario+" realiz\xf3 un comentario</p>"),o+="</a>",o+="</div>",r>60&&r<=120?o+='<p style="margin-top:-20px !important; font-size: 12px; color: #373435; padding-left: 66px;height:100%;"><small>Hace '+parseInt(s)+" hora </small></p>":r>120&&r<1440?o+='<p style="margin-top:-20px !important; font-size: 12px; color: #373435; padding-left: 66px;height:100%;"><small>Hace '+parseInt(s)+" horas </small></p>":r>1440&&r<=2280?o+='<p style="margin-top:-20px !important; font-size: 12px; color: #373435; padding-left: 66px;height:100%;"><small>Hace '+parseInt(l)+" dia </small></p>":r>2280?o+='<p style="margin-top:-20px !important; font-size: 12px; color: #373435; padding-left: 66px;height:100%;"><small>Hace '+parseInt(l)+" dias </small></p>":r>=0&&r<=59&&(o+='<p style="margin-top:-20px !important; font-size: 12px; color: #373435; padding-left: 66px;height:100%;"><small>Hace '+r+" minutos </small></p>")}),$("#content-notify-site").html(o),$("#content-notify-mobile").html(o);var n=e.notificaciones_count.length;$("#count-notify-site").text(n),$("#count-notify-mobile").text(n)},error:function(t,e,o){console.log("Error al obtener las notificaciones:",o)}})}document.addEventListener("DOMContentLoaded",function(){videoItems.forEach(function(t){let e=t.querySelector(".img_poster"),o=t.querySelector(".card-custom-video-re");o.style.display="none",e.style.display="block",e.addEventListener("click",function(){e.style.display="none",o.style.display="block",o.load(),o.play()})}),videoItems2.forEach(function(t){let e=t.querySelector(".img_poster-2"),o=t.querySelector(".card-custom-video-re-2");o.style.display="none",e.style.display="block",e.addEventListener("click",function(){e.style.display="none",o.style.display="block",o.load(),o.play()})})}),$(document).ready(function(){$.ajax({url:"/post-count",type:"GET",success:function(t){var e=t.likes;for(var o in e){var a=e[o];$("#likes-count-"+o).text(a)}},error:function(t,e,o){console.error(o)}}),$.ajax({url:"/comment-post",type:"GET",success:function(t){var e=t.comments;for(var o in e){var a=e[o];$("#post-count-"+o).text(a)}},error:function(t,e,o){console.error(o)}}),$.ajax({url:"/notificaciones",type:"GET",success:function(t){var e=t.notificaciones_count.length;$("#count-notify-site").text(e),$("#count-notify-mobile").text(e)},error:function(t,e,o){console.log("Error al obtener las notificaciones:",o)}});var t=document.getElementById("content-notify-site");null!=t&&(t.style.display="none");var e=document.getElementById("content-notify-mobile");null!=e&&(e.style.display="none")}),$(document).on("click",".btn-comment-delete",function(){var t=$(this).data("id");$(this).data("post"),$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},url:"/eliminar-comentario",type:"DELETE",data:{id:t},success:function(t){location.reload()},error:function(t,e,o){alert("Error al registrar")}})}),$(document).on("click",".bn-follow",function(){var t=$(this).data("auth"),e=$(this).data("tocar"),o=document.getElementById("img-follow");$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},url:"/follow-user",type:"POST",data:{userAuth:t,userFollow:e},success:function(t){$("#follow-count-te-visitan").text(t.follows+" Visitantes "),$("#button-check-follow").addClass("bn-follow-delete"),$("#button-check-follow").removeClass("bn-follow"),o.src="../../images/icons/te-visitan.png"},error:function(t,e,o){alert("Error al registrar")}})}),$(document).on("click",".btn-redes",function(){var t=$(this).data("url");document.getElementById("input_vinculo_post").value=t;var e=$(".icon-facebook-red"),o=$(".icon-twitter-red"),a=$(".icon-linkedin-red"),n=$(".icon-whatsapp-red");e.attr("href","https://www.facebook.com/sharer/sharer.php?u="+t),e.attr("target","_blank"),o.attr("href","https://twitter.com/intent/tweet?url="+t),o.attr("target","_blank"),a.attr("href","https://www.linkedin.com/sharing/share-offsite/?url="+t),a.attr("target","_blank"),n.attr("href","https://api.whatsapp.com/send?text=\xa1Echa un vistazo a esta publicaci\xf3n "+t),n.attr("target","_blank")}),$(document).on("click",".bn-follow-delete",function(){var t=$(this).data("auth"),e=$(this).data("tocar"),o=document.getElementById("img-follow");$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},url:"/delete-follow-user",type:"DELETE",data:{userAuth:t,userFollow:e},success:function(t){$("#follow-count-te-visitan").text(t.follows+" Te visitan "),$("#button-check-follow").removeClass("bn-follow-delete"),$("#button-check-follow").addClass("bn-follow"),o.src="../../images/icons/no-te-visitan.png"},error:function(t,e,o){alert("Error al registrar")}})}),$(document).on("click",".edit_post",function(){var t=$(this).data("idpost"),e=$(this).data("description");$("#modal-edit-post").find(".idPostEdit").val(t),$("#modal-edit-post").find(".pu_descripcion").val(e)}),$(document).on("click",".edit-post-db",function(){var t=$(".idPostEdit").val(),e=$(".pu_descripcion").val();$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},url:"/post-edit",type:"PUT",data:{id:t,descripcion:e},success:function(t){location.reload()},error:function(t,e,o){alert("Error al registrar")}})}),$(document).on("click",".button-check",function(){var t=$(this).data("auth"),e=$(this).data("video");$("#button-action-"+e).addClass("button-check-delete"),$("#button-action-"+e).removeClass("button-check"),$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},url:"/post-action",type:"POST",data:{auth:t,video:e},success:function(t){$("#likes-count-"+e).text(t.likes)},error:function(t,e,o){alert("Error al registrar")}})}),$(document).on("click",".button-check-delete",function(){var t=$(this).data("auth"),e=$(this).data("video");$("#button-action-"+e).addClass("button-check"),$("#button-action-"+e).removeClass("button-check-delete"),$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},url:"/post-action-delete",type:"DELETE",data:{auth:t,video:e},success:function(t){$("#likes-count-"+e).text(t.likes)},error:function(t,e,o){alert("Error al registrar")}})}),$(".show_post").click(function(){var t=$(this).data("id");$("#modal-d-post").find(".miInput").val(t)}),$(document).on("click",".d-cuenta",function(){var t=$("#miInput").val();$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},url:"/post-delete",type:"DELETE",data:{id:t},success:function(t){window.location.href="/"},error:function(t,e,o){alert("Error al registrar")}})});var contador=0;$(document).on("click",".ver-notificaciones-btn",function(){var t=document.getElementById("content-notify-site");t.style.display="block",2==++contador&&(t.style.display="none",contador=0),obtenerNotificacionesComentarios();var e=$(this).data("user");$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},url:"/post-most-notify",type:"PUT",data:{user:e},success:function(t){},error:function(t,e,o){alert("Error al registrar")}})}),$(document).on("click",".ver-notificaciones-btn-mobile",function(){var t=document.getElementById("content-notify-mobile");t.style.display="block",2==++contador&&(t.style.display="none",contador=0),obtenerNotificacionesComentarios();var e=$(this).data("user");$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},url:"/post-most-notify",type:"PUT",data:{user:e},success:function(t){},error:function(t,e,o){alert("Error al registrar")}})});